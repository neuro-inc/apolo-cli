image: Visual Studio 2015

environment:
  # ensure Python 3.6 is first in path
  PATH: 'C:\Python37;C:\Python37\Scripts;%PATH%'
  # GNU make
  MAKE: C:\MinGW\bin\mingw32-make.exe

platform: x64

install:
  # install dev dependencies
  - '%MAKE% -C python init'

build: off

# do not run automatic test discovery
test: off

test_script:
  - '%MAKE% -C python test'
  - '%MAKE% -C python _e2e'
  - '%MAKE% -C python coverage'

# will start RDP server you can connect to for remote debugging (a-la ssh in circleci)
# on_finish:
#   - ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))
