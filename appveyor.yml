image: Visual Studio 2015

environment:
  # ensure Python 3.6 is first in path
  PATH: 'C:\Python37;C:\Python37\Scripts;%PATH%'
  # GNU make
  MAKE: C:\MinGW\bin\mingw32-make.exe

platform: x64

install:
  # install dev dependencies
  - '%MAKE% -C python init'

# do not run automatic test discovery
test: off

build_script:
  - '%MAKE% -C python test'

on_finish:
  - ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))
