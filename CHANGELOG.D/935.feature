Use dataclasses in image progress API